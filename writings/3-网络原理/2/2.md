<h1 style="text-align:center"><small>计算机网络原理</small><br/>作业 2</h1>
<p style="text-align:right">李祥泽</p>

## 1.1 ##

这条狗携带 21 GB, 或 168 Gb 数据, 以 18 km/h, 或 0.005 km/s 的速度行进. 当传输距离是 $x$ km 时, 所需时间是 $200x$ s. 数据速率是 $168/(200x)$ Gbps, 即 $840/x$ Mbps. 

因此, 当传输距离 $x<5.6$ km 时, 狗带着磁带跑的数据速率大于 150 Mbps 的数据线. 

如果狗的速度加倍或磁带容量加倍, 以上距离加倍; 数据线路速率加倍, 则以上距离减半. 

## 1.3 ##

跨大洋海底光纤网络是高带宽, 高延迟的网络. 其带宽可达数 Gb 每秒, 但由于距离太远, 延迟是高的. 

用一根很短的线连起来的服务器和客户端之间可以是一个低带宽, 低延迟的网络. 

## 1.4 ##

对于视频和音频传输, 要求网络的延迟稳定, 即延迟不能经常或大幅度变化. 

对于金融传输, 要求可靠性和安全性. 

## 1.9 ##

在一个时间槽内, 每个主机成功取得使用权的概率是 $p(1-p)^{n-1}$; 没有主机申请的概率是 $(1-p)^{n}$. 除此以外的所有情况都会导致冲突. 因此造成冲突的概率是
$$
1 - n \cdot p(1-p)^{n-1} - (1-p)^{n}
$$

这也就是被浪费的时间槽的比例. 

## 1.10 ##

第一, 对系统进行分层, 可以将设计需求分解成数个较为简单的子任务, 简化设计工作. 第二, 只要保持向上和向下的接口不变, 每一层的协议都可以在不产生额外影响的情况下更换. 

但是, 分层系统由于要进行层级间的数据交换, 其效率要低于整合的单层系统. 

## 1.11 ##

根据 OSI 模型, 真实的物理连接只能发生在最底层. 而该事件中每一层之间都发生了直接的, 物理的连接. 

## 1.12 ##

报文流和字节流是不同的. 前者在传输过程中标记了消息的边界, 后者不会. 举例说, 发送方向流中发送两条各 10 Bytes 的消息, 然后接收方从流中读 20 Bytes. 如果是报文流, 接收方应收到两条消息, 各 10 Bytes; 如果是字节流, 接收方应收到 20 Bytes 的数据, 而不能 (根据流) 分辨出这是两条消息. 

## 1.15 ##

记传一个帧需要的传输次数是 $X$, 则 $P(X)=(1-p)^{X-1}p$. 换言之, $X$ 服从几何分布 $GE(p)$ 则期望是
$$
E(X)= \frac{1}{p}
$$

## 1.20 ##

如果网络经常发生数据丢失, 逐数据包验证是更合适的. 因为这样接收方可以只要求对方重新传输丢失的数据包, 而无需重传整个文件. 降低的重传成本占主要地位. 反之, 如果网络可靠性较好, 逐文件验证是更合适的. 因为这样接收方只需发送一次确认信号 (发送方也只需等待一个信号). 降低的确认信号成本占主要地位. 

## 1.33 ##

在 Windows 10 (宿舍有线网) 下使用 `ping -n 16 -4 xxx`. 取平均时间. 

距离是根据 Bing 地图测出的直线距离. 

| 目标                   | 时间 (ms) | 地点               | 距离 (km) |
| ---------------------- | --------- | ------------------ | --------- |
| `berkeley.edu`         | 213       | 伯克利, 加州, 美国 | 9500      |
| `mit.edu`              | 368       | 剑桥, 麻省, 美国   | 10000     |
| `vu.nl`                | 超时      |                    |           |
| `www.usyd.edu.au`      | 158       | 悉尼, 澳大利亚     | 9000      |
| `www.uct.ac.za`        | 超时      |                    |           |
| `info.tsinghua.edu.cn` | <1        | 北京, 中国         | 0         |
| `sysu.edu.cn`          | 35        | 中山, 广东, 中国   | 2000      |

可见, 传输时间与直线距离并不成线性关系. 但是大致正相关. 

## 2.1 ##

有 $T=1,\ f=1$. 

$c=2\cdot \int_0^1{f(t)\text{d}t}=1$

$a_n=2\cdot \int_0^1{f(t)\sin{(2\pi nt)}\text{d}t}=-\frac{1}{n\pi}$

$b_n=2\cdot\int_0^1{f(t)\cos(2\pi nt)\text{d}t}=0$

## 2.3 ##

由 Nyquist 定理, 最大传输速率为 $2\cdot 6 \text{ Mhz }\cdot \log_2{4}= 24 \text{ Mbps}$. 

## 2.4 ##

由 Shannon 定理, 最大传输速率为 $3 \text{ kHz }\cdot\log_2{(1+10^{20/10})}=19.97\text{ kbps}$. 但是, 考虑信号电平级数和采样速度后, 由 Nyquist 定理计算出最大传输速率为 $6\text{ kbps}$. 因此此处应该取后者. 

## 2.5 ##

T1 载波要求 1.544 Mbps. 由 Shannon 定理计算出所需的 $\frac{S}{N}=1.976 \times 10^{9}$. 即信噪比 $10\log{S\over N}=93\text{ dB}$. 

## 2.9 ##

Nyquist 定理是数学结论, 与具体实现无关. 因此不论铜线与光纤, 均等同地受其限制. 

## 2.20 ##

石油管线是半双工系统, 因为 (理论上) 石油可以双向传输. 河流在水流的意义上是单工系统, 在河流上的船只的意义上是全双工系统. PTT 对讲机是半双工系统. 

## 2.25 ##

10 个信号两两之间需要一个保护带, 总计需要 9 个. 因此信道的总带宽不能低于 $4000\times 10+400\times9=43600 \text{ Hz}$. 

## 2.37 ##

从跳数来看: 

最好的是全联通结构, 任意两个节点通信只需要 1 跳; 

其次是星形结构, 任意两个节点之间均需要 2 跳. 

对于双向环结构, 最好情况 (当两个节点直接相连) 需要 1 跳, 最坏情况 (当两个节点正对面) 需要 n/2 跳, 随机两个节点的平均/期望跳数是 n/4. 

## 2.38 ##

对于电路交换网络: 完成传输需要的时间是 $t_{circuit}=s+x/b+kd$. 

对于包交换网络, 最后一个 bit 被发送的时刻是 $x/b$; 每个数据包总共被转发 $k-1$ 次, 每次转发在数据传输上用时 $p/b$; 外加线路上的延迟 $kd$. 总计用时是 $t_{packet}=x/b+(k-1)p/b+kd$. 

因此, 在 $s>(k-1)p/b$ 时包交换网络延迟较短. 

## 2.39 ##

总计需要的数据包数是 $x/p$, 进而总计需要传输的数据量是 $(p+h)\cdot x/p$. 每个包需要被转发 $k-1$ 次, 每次用时 $(p+h)/b$. 由于不计线路延迟, 总计用时是 $t=(p+h)\cdot x/(p\cdot b)+(k-1)(p+h)/b$. 

最小化 $\bold t(p)$, 考虑 $x \gg p+h$, 得到此时的 $t=\sqrt{hx/(k-1)}$. 

## 2.40 ##

每个蜂窝有 6 个相邻蜂窝. 为了最大化每个蜂窝的频率数, 考虑最小化蜂窝所使用的频段数量. 

假定一个蜂窝使用了频段 A, 那么其 6 个相邻蜂窝至少需要 2 个频段 B, C (两者交替使用). 而铺满整个平面恰好不需要其他频段. 对于使用 B 的蜂窝, 其相邻蜂窝只需交替地使用 A 和 C; 使用 C 的亦然. 

则每个频段可以拥有 280 个频率. 

## 2.48 ##

用总线结构模拟星形结构是可行的. 不考虑电视光纤上的电视业务, 将全部带宽分配给电话通信, 可以采用时分复用. 

 在 10 Gbps 总线上, 每台电话需要的数据速率为 64 kbps, 可以支持 156250 台电话. 

